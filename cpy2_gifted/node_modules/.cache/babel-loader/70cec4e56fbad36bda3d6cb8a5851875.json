{"ast":null,"code":"var _jsxFileName = \"/Users/manishchandra/Documents/personal_workspace/cpy2_gifted/src/containers/AppContent.js\";\nimport React, { Component, Suspense, lazy } from \"react\";\nimport \"./style.css\";\nconst Search = lazy(() => import(\"../components/search\"));\nconst Cards = lazy(() => import(\"../components/cards\"));\nexport default class AppContent extends Component {\n  constructor(props) {\n    super(props);\n\n    this.fetchGIF = () => {\n      if (this.searchText) {\n        let offset = this.state.offset || 0;\n        this.setState({\n          isLoading: true,\n          fetching: true\n        });\n        fetch(`https://api.giphy.com/v1/gifs/search?api_key=${process.env.REACT_APP_GIPHY_API_KEY}&q=${this.searchText}&limit=${this.state.limit}&offset=${offset + this.state.limit}`).then(response => {\n          console.log(\"fetchGIF\", response);\n          return response.json();\n        }).then(searchedResponse => {\n          console.log(\"searchedResponse :: \", searchedResponse);\n          return this.setState({\n            gifs: searchedResponse.data || [],\n            offset: searchedResponse.pagination.offset + this.state.limit,\n            isLoading: false,\n            fetching: false\n          });\n        }).catch(err => console.log(\"Error :: \", err));\n      }\n    };\n\n    this.debounceFetchGIF = (fn, limit) => {\n      let timer;\n      return () => {\n        timer && clearTimeout(timer);\n        timer = setTimeout(fn, limit);\n      };\n    };\n\n    this.handleDebouncedSearchEvent = this.debounceFetchGIF(this.fetchGIF, 300);\n\n    this.updateSearchText = searchText => {\n      if (searchText !== this.searchText) {\n        this.setState({\n          offset: 0\n        });\n      }\n\n      this.searchText = searchText && searchText.length > 0 ? searchText : \"happy\";\n      this.handleDebouncedSearchEvent();\n    };\n\n    this.state = {\n      gifs: [],\n      offset: 0,\n      limit: 25\n    };\n    this.searchText = \"happy\";\n  }\n\n  componentDidMount() {\n    console.log(\"called\");\n    this.fetchGIF();\n  }\n\n  render() {\n    const gifs = this.state.gifs;\n    return React.createElement(\"div\", {\n      className: \"app_content\",\n      \"data-test\": \"appContent\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, React.createElement(Suspense, {\n      fallback: React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, \"Loading...\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, React.createElement(Search, {\n      updateSearchText: this.updateSearchText,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }), React.createElement(Cards, {\n      \"data-test\": \"cardInAppContent\",\n      gifs: gifs,\n      fetchGIF: this.fetchGIF,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    })));\n  }\n\n}","map":{"version":3,"sources":["/Users/manishchandra/Documents/personal_workspace/cpy2_gifted/src/containers/AppContent.js"],"names":["React","Component","Suspense","lazy","Search","Cards","AppContent","constructor","props","fetchGIF","searchText","offset","state","setState","isLoading","fetching","fetch","process","env","REACT_APP_GIPHY_API_KEY","limit","then","response","console","log","json","searchedResponse","gifs","data","pagination","catch","err","debounceFetchGIF","fn","timer","clearTimeout","setTimeout","handleDebouncedSearchEvent","updateSearchText","length","componentDidMount","render"],"mappings":"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","sourcesContent":["import React, { Component, Suspense, lazy } from \"react\";\nimport \"./style.css\";\nconst Search = lazy(() => import(\"../components/search\"));\nconst Cards = lazy(() => import(\"../components/cards\"));\nexport default class AppContent extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tgifs: [],\n\t\t\toffset: 0,\n\t\t\tlimit: 25\n\t\t};\n\t\tthis.searchText = \"happy\";\n\t}\n\tcomponentDidMount() {\n\t\tconsole.log(\"called\");\n\t\tthis.fetchGIF();\n\t}\n\n\tfetchGIF = () => {\n\t\tif (this.searchText) {\n\t\t\tlet offset = this.state.offset || 0;\n\t\t\tthis.setState({ isLoading: true, fetching: true });\n\t\t\tfetch(\n\t\t\t\t`https://api.giphy.com/v1/gifs/search?api_key=${\n\t\t\t\t\tprocess.env.REACT_APP_GIPHY_API_KEY\n\t\t\t\t}&q=${this.searchText}&limit=${this.state.limit}&offset=${offset +\n\t\t\t\t\tthis.state.limit}`\n\t\t\t)\n\t\t\t\t.then(response => {\n\t\t\t\t\tconsole.log(\"fetchGIF\", response);\n\t\t\t\t\treturn response.json();\n\t\t\t\t})\n\t\t\t\t.then(searchedResponse => {\n\t\t\t\t\tconsole.log(\"searchedResponse :: \", searchedResponse);\n\t\t\t\t\treturn this.setState({\n\t\t\t\t\t\tgifs: searchedResponse.data || [],\n\t\t\t\t\t\toffset: searchedResponse.pagination.offset + this.state.limit,\n\t\t\t\t\t\tisLoading: false,\n\t\t\t\t\t\tfetching: false\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.catch(err => console.log(\"Error :: \", err));\n\t\t}\n\t};\n\n\tdebounceFetchGIF = (fn, limit) => {\n\t\tlet timer;\n\t\treturn () => {\n\t\t\ttimer && clearTimeout(timer);\n\t\t\ttimer = setTimeout(fn, limit);\n\t\t};\n\t};\n\n\thandleDebouncedSearchEvent = this.debounceFetchGIF(this.fetchGIF, 300);\n\n\tupdateSearchText = searchText => {\n\t\tif (searchText !== this.searchText) {\n\t\t\tthis.setState({ offset: 0 });\n\t\t}\n\t\tthis.searchText =\n\t\t\tsearchText && searchText.length > 0 ? searchText : \"happy\";\n\t\tthis.handleDebouncedSearchEvent();\n\t};\n\n\trender() {\n\t\tconst { gifs } = this.state;\n\t\treturn (\n\t\t\t<div className=\"app_content\" data-test=\"appContent\">\n\t\t\t\t<Suspense fallback={<div>Loading...</div>}>\n\t\t\t\t\t<Search updateSearchText={this.updateSearchText} />\n\t\t\t\t\t<Cards\n\t\t\t\t\t\tdata-test=\"cardInAppContent\"\n\t\t\t\t\t\tgifs={gifs}\n\t\t\t\t\t\tfetchGIF={this.fetchGIF}\n\t\t\t\t\t/>\n\t\t\t\t</Suspense>\n\t\t\t</div>\n\t\t);\n\t}\n}\n"]},"metadata":{},"sourceType":"module"}