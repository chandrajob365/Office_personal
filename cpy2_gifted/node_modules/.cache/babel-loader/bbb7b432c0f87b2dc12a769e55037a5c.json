{"ast":null,"code":"var _jsxFileName = \"/Users/manishchandra/Documents/personal_workspace/cpy2_gifted/src/containers/AppContent.js\";\nimport React, { Component, Suspense, lazy } from \"react\";\nimport \"./style.css\";\nconst Search = lazy(() => import(\"../components/search\"));\nconst Cards = lazy(() => import(\"../components/cards\"));\nexport default class AppContent extends Component {\n  constructor(props) {\n    super(props);\n\n    this.fetchGIF = () => {\n      if (this.searchText && !this.state.fetching) {\n        let offset = this.state.offset || 0;\n        this.setState({\n          isLoading: true,\n          fetching: true\n        });\n        fetch(`https://api.giphy.com/v1/gifs/search?api_key=${process.env.REACT_APP_GIPHY_API_KEY}&q=${this.searchText}&limit=${this.state.limit}&offset=${offset + this.state.limit}`).then(response => {\n          console.log(\"fetchGIF\", response);\n          return response.json();\n        }).then(searchedResponse => {\n          console.log(\"searchedResponse :: \", searchedResponse);\n          return this.setState({\n            gifs: [...this.state.gifs, ...searchedResponse.data],\n            offset: searchedResponse.pagination.offset + this.state.limit,\n            isLoading: false,\n            fetching: false\n          });\n        }).catch(err => {\n          console.log(\"Error :: \", err);\n          this.setState({\n            isLoading: false,\n            fetching: false\n          });\n        });\n      }\n    };\n\n    this.debounceFetchGIF = (fn, limit) => {\n      let timer;\n      return () => {\n        timer && clearTimeout(timer);\n        timer = setTimeout(fn, limit);\n      };\n    };\n\n    this.handleDebouncedSearchEvent = this.debounceFetchGIF(this.fetchGIF, 300);\n\n    this.updateSearchText = searchText => {\n      if (searchText !== this.searchText) {\n        this.setState({\n          offset: 0\n        });\n      }\n\n      this.searchText = searchText && searchText.length > 0 ? searchText : \"happy\";\n      this.handleDebouncedSearchEvent();\n    };\n\n    this.state = {\n      gifs: [],\n      offset: 0,\n      limit: 25,\n      isLoading: false,\n      fetching: false\n    };\n    this.searchText = \"happy\";\n  }\n\n  componentDidMount() {\n    console.log(\"called\");\n    this.fetchGIF();\n  }\n\n  render() {\n    const gifs = this.state.gifs;\n    return React.createElement(\"div\", {\n      className: \"app_content\",\n      \"data-test\": \"appContent\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, React.createElement(Suspense, {\n      fallback: React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, \"Loading...\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, React.createElement(Search, {\n      updateSearchText: this.updateSearchText,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }), React.createElement(Cards, {\n      \"data-test\": \"cardInAppContent\",\n      gifs: gifs,\n      fetchGIF: this.fetchGIF,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    })));\n  }\n\n}","map":{"version":3,"sources":["/Users/manishchandra/Documents/personal_workspace/cpy2_gifted/src/containers/AppContent.js"],"names":["React","Component","Suspense","lazy","Search","Cards","AppContent","constructor","props","fetchGIF","searchText","state","fetching","offset","setState","isLoading","fetch","process","env","REACT_APP_GIPHY_API_KEY","limit","then","response","console","log","json","searchedResponse","gifs","data","pagination","catch","err","debounceFetchGIF","fn","timer","clearTimeout","setTimeout","handleDebouncedSearchEvent","updateSearchText","length","componentDidMount","render"],"mappings":"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","sourcesContent":["import React, { Component, Suspense, lazy } from \"react\";\nimport \"./style.css\";\nconst Search = lazy(() => import(\"../components/search\"));\nconst Cards = lazy(() => import(\"../components/cards\"));\nexport default class AppContent extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tgifs: [],\n\t\t\toffset: 0,\n\t\t\tlimit: 25,\n\t\t\tisLoading: false,\n\t\t\tfetching: false\n\t\t};\n\t\tthis.searchText = \"happy\";\n\t}\n\tcomponentDidMount() {\n\t\tconsole.log(\"called\");\n\t\tthis.fetchGIF();\n\t}\n\n\tfetchGIF = () => {\n\t\tif (this.searchText && !this.state.fetching) {\n\t\t\tlet offset = this.state.offset || 0;\n\t\t\tthis.setState({ isLoading: true, fetching: true });\n\t\t\tfetch(\n\t\t\t\t`https://api.giphy.com/v1/gifs/search?api_key=${\n\t\t\t\t\tprocess.env.REACT_APP_GIPHY_API_KEY\n\t\t\t\t}&q=${this.searchText}&limit=${this.state.limit}&offset=${offset +\n\t\t\t\t\tthis.state.limit}`\n\t\t\t)\n\t\t\t\t.then(response => {\n\t\t\t\t\tconsole.log(\"fetchGIF\", response);\n\t\t\t\t\treturn response.json();\n\t\t\t\t})\n\t\t\t\t.then(searchedResponse => {\n\t\t\t\t\tconsole.log(\"searchedResponse :: \", searchedResponse);\n\t\t\t\t\treturn this.setState({\n\t\t\t\t\t\tgifs: [...this.state.gifs, ...searchedResponse.data],\n\t\t\t\t\t\toffset: searchedResponse.pagination.offset + this.state.limit,\n\t\t\t\t\t\tisLoading: false,\n\t\t\t\t\t\tfetching: false\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.catch(err => {\n\t\t\t\t\tconsole.log(\"Error :: \", err);\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tisLoading: false,\n\t\t\t\t\t\tfetching: false\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t}\n\t};\n\n\tdebounceFetchGIF = (fn, limit) => {\n\t\tlet timer;\n\t\treturn () => {\n\t\t\ttimer && clearTimeout(timer);\n\t\t\ttimer = setTimeout(fn, limit);\n\t\t};\n\t};\n\n\thandleDebouncedSearchEvent = this.debounceFetchGIF(this.fetchGIF, 300);\n\n\tupdateSearchText = searchText => {\n\t\tif (searchText !== this.searchText) {\n\t\t\tthis.setState({ offset: 0 });\n\t\t}\n\t\tthis.searchText =\n\t\t\tsearchText && searchText.length > 0 ? searchText : \"happy\";\n\t\tthis.handleDebouncedSearchEvent();\n\t};\n\n\trender() {\n\t\tconst { gifs } = this.state;\n\t\treturn (\n\t\t\t<div className=\"app_content\" data-test=\"appContent\">\n\t\t\t\t<Suspense fallback={<div>Loading...</div>}>\n\t\t\t\t\t<Search updateSearchText={this.updateSearchText} />\n\t\t\t\t\t<Cards\n\t\t\t\t\t\tdata-test=\"cardInAppContent\"\n\t\t\t\t\t\tgifs={gifs}\n\t\t\t\t\t\tfetchGIF={this.fetchGIF}\n\t\t\t\t\t/>\n\t\t\t\t</Suspense>\n\t\t\t</div>\n\t\t);\n\t}\n}\n"]},"metadata":{},"sourceType":"module"}